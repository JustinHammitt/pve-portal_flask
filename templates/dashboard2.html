<script>
  function loadConsole(vmid) {
    fetch("/get_console_url", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "X-CSRFToken": "{{ csrf_token() }}"
      },
      body: JSON.stringify({ vmid })
    })
    .then(r => r.json())
    .then(json => {
      if (json.console_url) {
        document.getElementById("console-frame").src = json.console_url
      } else {
        alert("Error: " + (json.error || "unknown"))
      }
    })
  }
  </script>
  